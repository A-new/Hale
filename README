How to add modules, the current module API work as follow:

1) Implement module, for example:

import moduleManager
from utils import moduleInterface

@moduleManager.register("irc")
def module_setup(config):
    """
    Function to register modules, simply
    implement this to pass along the config
    to the module object and return it back
    """
    
    return IRC(config)

# must inherit from Module class
class IRC(moduleInterface.Module):

   def __init__(self, config):
       self.config = config
   
   # must be implemented
   def stop(self):
       # stop execution
   
   # must be implemented
   def run(self):
       # start execution
   
   # must be implemented    
   def getConfig(self):
       return self.config

Add decorator for the register function (in this case module_setup)
which will be called with the current configuration as argument. This 
function can be named anything. Pass along the configurations to the 
module object, the configHandler catches KeyErrors so if wrong 
configurations are sent to this function configHandler will notify 
you about it. 

Also follow the naming convention nameModule.py and @moduleManager.register("name") 
and import the moduleManager, if not the moduleManager will notify 
you about any errors.

Catch all possible exceptions and send them to the module coordinator
error bucket which takes care of all errors from every module running 
in the monitor system. These errors can be shown with the 'showlog' command
in the CLI

2) Drag the file to the modules directory. The moduleManager will
then automatically import it and check for errors.

3) In modules.conf edit the configuration, in this case:

# specify unique configs for module
# a * means that all configs contaning the strings equal to the one 
# after the * will be treated as unique. 
# in this example all pass_grammar, mode_grammar etc should be 
# treated as unique keys
[uniqueKeys]
irc = botnet, *grammar, ... etc
# name a section, can be anything as long as its unique
# and add module regname (in this case irc) as module option
[myIrcConf]
module = irc
nick = SpyBot
channel = #irc
...
etc.

Feeder bot HOWTO:

When sending a request for a botnet to track the request is made as follow
to the groupchat coordination room 

sensorLoadReq

where all sensors reply with their id and queue length (number of monitored botnets)

sensorLoadAck id=353f6650859547ed06597dbfa1dcfd88 queue=0

The feeder then choose one sensor based on this info like lowest queue length
and if these are equal for several sensors, then the sensor id sorted alphabetically
with lowest value is chosen.

When the feeder has chosen a sensor it sends a private chat message to the sensor

startTrackReq config

where config is a string representation of the configuration, for example

module=irc botnet=irc.freenode.net etc..

The sensor then replies with a 

startTrackAck

if no one else is monitoring this botnet, otherwise a startTrackNack is received if the 
botnet is already monitored or the sensor does not have the module installed for this botnet 
